// build time:Wed Nov 25 2020 04:47:24 GMT+0000 (Coordinated Universal Time)
$.extend({menuInWidth:1240,hideOnMask:[],minWidth:760,fixedClick:function(){FastClick.attach(document.body)},page:function(){var e=$(".fade, .fade-scale");var a=false;return{loaded:function(){e.each(function(){$(this).addClass("in")});a=true},unload:function(){e.each(function(){$(this).removeClass("in")});a=true},visible:a}},toc:function(e){var e=$(".post-widget");var a=$(".toc-bar");var t=$(".post-header").outerHeight();var i=$("#header").outerHeight();var s=$("#post-content").find("h1, h2, h3, h4");var n=$(".post-card");return{fixed:function(a){if(a>=t-i){e.css({left:n.offset().left+n.outerWidth(true)+40});e.addClass("fixed")}else{e.css("left","");e.removeClass("fixed")}},actived:function(t){var n;s.each(function(a,s){if(t>$(s).offset().top-i){n=e.find('a[href="#'+$(s).attr("id")+'"]').parent()}});if(n){e.find("li.active").removeClass("active");n.addClass("active");n.parents(".post-toc-item").addClass("active");a.css("top",n.position().top)}if(t<s.eq(0).offset().top){e.find("li.active").removeClass("active");var o=e.find('a[href="#'+s.eq(0).attr("id")+'"]').parent();o.addClass("active");a.css("top",o.position().top)}},go:function(){e.delegate(".post-toc-item","click",function(e){e.preventDefault();e.stopPropagation();var a=$(this).children(".post-toc-link").attr("href").replace(/^\#/,"");var t=$("#post-content").find("h1, h2, h3, h4");t.each(function(e,t){if($(this).attr("id")===a){var i=$(this).offset().top;$("body,html").stop(true,false);$("body,html").animate({scrollTop:i},300)}})})}}},toggleMenu:function(){var e=$("#main");var a=$("#menu");var t=$("html");var i=$("#mask");var s=$(".header-title");var n=/micromessenger/i.test(navigator.userAgent);return{init:function(){var e=$("#menu-toggle");var t=$("#menu-off");a.removeClass("hide");e.click(function(e){e.preventDefault();$.toggleMenu().show()});t.click(function(e){e.preventDefault();$.toggleMenu().hide()});if($(document).width()>=$.menuInWidth){s.addClass("push")}},show:function(){a.removeClass("hide");$.hideOnMask=[];$.hideOnMask.push($("#menu-off"));if($(document).width()<$.menuInWidth){i.addClass("in");a.addClass("show");a.removeClass("hide");if(n){var o=$(document).scrollTop();e.addClass("lock");e.scrollTop(o)}else{t.addClass("lock")}}else{s.addClass("push")}},hide:function(){a.removeClass("show");a.addClass("hide");i.removeClass("in");s.removeClass("push");if(n){var o=$(document).scrollTop();e.removeClass("lock");e.scrollTop(o)}else{t.removeClass("lock")}}}},fixedHeader:function(e){var a=$("#header");var t=$(".content-header").outerHeight()-a.outerHeight();if(e>t){a.addClass("fixed")}else{a.removeClass("fixed")}},toggleGoTop:function(){var e=$("#gotop");return{active:function(){e.click(function(){$("body,html").stop(true,false);$("body,html").animate({scrollTop:0},300)})},scroll:function(a){if(a>$(document).height()/5){e.addClass("in")}else{e.removeClass("in")}}}},share:function(){var e=$("#pageShare");var a=$("#shareFab");var t=$("#menuShare");var i=$("#globalShare");var s=$(".wxFab");var n=$("#wxShare");var o=$("#mask");if(a.length>0){a.click(function(){e.toggleClass("in")});$(document).click(function(t){if(!a.get(0).contains(t.target)){e.removeClass("in")}})}s.click(function(){if(n.hasClass("in")){o.removeClass("in");n.removeClass("in");setTimeout(function(){n.removeClass("ready")},300)}else{o.addClass("in");n.addClass("ready");setTimeout(function(){n.addClass("in")},0);$.hideOnMask=[];$.hideOnMask.push($(this),n.find(".close"))}});n.find(".close").click(function(){o.removeClass("in");n.removeClass("in");i.removeClass("in");$.hideOnMask=[];setTimeout(function(){n.removeClass("ready");i.removeClass("ready")},300)})},search:function(){var e=$("#site_search_btn");var a=$("#site_search");var t=a.find(".close");var i=$("#mask");return{init:function(){e.click(function(){if($(window).width()<$.minWidth){$("html").addClass("lock")}else{i.addClass("in")}a.addClass("in");$.hideOnMask=[];$.hideOnMask.push($(this),a.find(".close"))});t.click(function(){if($(window).width()<$.minWidth){$("html").removeClass("lock")}else{i.removeClass("in")}a.removeClass("in")})},zoom:function(){if($(document).width()<$.menuInWidth){a.removeClass("shrink")}else{a.addClass("shrink")}}}},reward:function(){var e=$("#reward");var a=$("#rewardBtn");var t=$("#rewardToggle");var i=$("#rewardCode");var s=$("#mask");a.click(function(){if(e.hasClass("in")){s.removeClass("in");e.removeClass("in");setTimeout(function(){e.removeClass("ready")},300)}else{s.addClass("in");e.addClass("ready");setTimeout(function(){e.addClass("in")},0);$.hideOnMask=[];$.hideOnMask.push($(this),e.find(".close"))}});e.find(".close").click(function(){s.removeClass("in");e.removeClass("in");$.hideOnMask=[];setTimeout(function(){e.removeClass("ready")},300)});if(t.length!=0){t.change(function(){i.attr("src",this.checked?this.dataset.alipay:this.dataset.wechat)})}},mask:function(){var e=$("#mask");e.click(function(e){$.hideOnMask.forEach(function(e){e.trigger("click")});e.preventDefault()})},waves:function(){if(window.Waves){Waves.init();Waves.attach(".global-share li",["waves-block"]);Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"])}},waterfall:function(){if($(window).width()<$.minWidth)return;$(".waterfall").each(function(){var e=$(this).find(".waterfall-item");var a=[0,0];e.each(function(){var e=a[0]<=a[1]?0:1;$(this).css({top:a[e],left:e>0?"50%":0});a[e]+=$(this).get(0).offsetHeight});$(this).css("height",Math.max(a[0],a[1]));$(this).addClass("in")});var e=$("#main>.content-header").height();var a=$("#main>.container").outerHeight(true);var t=$(".footer").height();var i=$(window).height();if(e+a+t<i){var s=i-t-e-10;$("#main>.container").css("min-height",s)}},tabBar:function(){var e=$(".tags-list-more");if(e.length>0){e.click(function(){$(this).parents(".tabs-bar").toggleClass("expand")})}}});
//rebuild by neat 